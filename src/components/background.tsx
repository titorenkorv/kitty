import { Layout, Text } from '@ui-kitten/components'
import { Image, ScrollView, StyleSheet, View, useWindowDimensions } from 'react-native'
import Svg, { SvgProps, Path } from 'react-native-svg'
import { useSafeAreaInsets } from 'react-native-safe-area-context'
import { LinearGradient } from './linear-gradient'
import { ReactElement } from 'react'
import { ReactNode } from 'react'
const background = require('@src/assets/people.png')
const logo = require('@src/assets/saluderia.png')

const LogoLeft = (props: SvgProps) => (
  <Svg width={163} height={'100%'} viewBox="0 0 163 990" fill="none" {...props}>
    <Path
      d="M8.739 61.188c1.987-2.703 3.478-6.143 4.72-9.338 2.732-5.406 4.968-10.566 8.694-13.515 2.236-1.72 4.72-1.966 6.955-.737a6.9 6.9 0 0 1 3.975 7.372c-.249 2.457-1.987 7.126-10.93 9.83l-.497.245.248.245 20.122 26.294h.248c.248-.246 24.095-8.846 24.095-37.843 0-13.761-4.222-25.065-11.923-32.929C47.242 3.932 36.809 0 26.376.246.54.737-8.898 18.922-16.102 32.19c-2.98 5.652-5.713 10.813-8.943 12.779-2.732 1.72-5.216 2.211-7.203.983-1.988-1.23-3.23-3.932-2.981-6.881.248-4.423 3.477-8.6 8.446-10.567l.248-.245L-46.159 0l-.249.246c-14.407 10.075-22.605 26.54-22.605 42.512 0 4.177.497 8.355 1.49 12.287 4.72 15.973 18.134 26.048 36.765 27.03 16.892 1.23 30.057-5.897 39.497-20.887ZM15.446 219.624c28.318-7.863 48.936-33.174 48.936-63.399 0-36.369-30.057-65.858-66.821-65.858-37.013 0-66.822 29.489-66.822 65.858 0 14.989 4.968 28.751 13.662 39.809.497.737.497 1.474.249 2.211l-11.924 20.396c-.993 1.475 0 3.195 1.739 3.195h63.096c6.21 0 12.171-.737 17.885-2.212Zm-23.102-32.437c-15.153-2.457-26.828-15.481-26.828-30.962 0-1.721 0-3.195.248-4.669 2.484-15.236 15.65-27.031 31.797-27.031 17.636 0 32.044 14.252 32.044 31.7 0 17.447-14.408 31.454-32.044 31.454-1.74 0-3.478-.246-5.217-.492ZM-69.51 273.289H163v-37.598H-69.51v37.598ZM63.14 374.945v-.246l-63.84-.492c-9.937 0-33.287-2.703-33.536-25.556 0-6.881 1.988-12.778 6.459-16.956 5.713-5.652 14.904-8.601 27.573-8.601H63.14v-36.123H-6.414c-21.115 0-38.255 6.635-49.93 18.922-10.433 10.812-15.401 25.802-14.16 41.775 1.74 25.065 14.16 38.826 15.899 40.546l-16.147 21.379-.248.492 133.643.491h.497v-35.631ZM158.032 515.943H51.465c6.458-14.252 7.949-22.116 7.949-29.98 0-36.368-29.064-65.611-65.083-65.611S-71 449.595-71 485.963c0 7.864 1.49 15.727 4.223 22.854 2.236 5.897 5.217 11.549 8.943 16.464.745.737.745 1.966.248 2.949l-10.93 19.167c-.993 1.72.249 3.932 2.236 3.932h224.312v-35.386Zm-168.172.492c-3.23-.492-6.459-1.475-9.44-2.949-10.184-5.161-17.14-15.727-17.14-27.523 0-1.72.249-3.194.497-4.669 1.987-14.989 15.401-26.539 31.3-26.539 17.388 0 31.547 14.007 31.547 31.208 0 11.796-6.955 22.362-17.14 27.523-4.223 2.211-9.191 3.44-14.408 3.44-1.738 0-3.477-.246-5.216-.491ZM15.446 690.258h.248c9.937-2.949 19.128-8.109 26.58-14.99 6.21-5.652 11.427-12.778 15.153-20.642.745-1.474 1.49-3.194 2.235-4.914.249-.492.249-.983.497-1.475.249-.737.497-1.72.994-2.457.248-1.475.745-3.195 1.242-4.669.248-1.966.745-3.932.993-5.898.249-.983.249-1.966.249-2.949.248-.737.248-1.474.248-2.211v-1.475c.249-2.211 0-4.177 0-6.143 0-.737 0-1.474-.248-2.212 0-.983-.248-1.965-.248-2.948-.249-1.966-.746-3.932-.994-5.898-.497-1.474-.994-3.195-1.242-4.669-.497-.737-.745-1.72-.994-2.457-.248-.492-.248-.983-.497-1.475-9.936-26.048-35.522-44.232-65.082-43.249-6.956.245-13.414 1.474-19.625 3.686-9.936 3.194-18.878 8.846-26.082 15.973-6.459 6.389-11.427 14.252-14.905 22.607 0 .246 0 .492-.248.737-.249 1.229-.745 2.212-1.242 3.441 0 .491-.249 1.228-.497 1.72l-.745 2.949c-.249 1.72-.746 3.194-.994 4.914 0 .738-.248 1.721-.248 2.458 0 .246-.249.491-.249.737v1.72c-.248.492-.248.983-.248 1.475v8.6c0 .492 0 .983.248 1.475v1.72c0 .246 0 .491.249.737 0 .737.248 1.72.248 2.457.248 1.721.745 3.195.994 4.915l.745 2.949c.248.491.497 1.229.497 1.72.497 1.229.993 2.212 1.242 3.44.248.246.248.492.248.738 1.242 2.948 2.733 5.897 4.223 8.6h.248c8.198 14.745 22.109 25.803 38.752 30.717l10.185-32.928c-6.21-1.72-11.427-5.406-15.402-10.075-3.974-4.669-6.707-10.567-7.452-16.956 0-.983-.248-1.72-.248-2.703V625.138c0-.983.248-1.966.248-2.703.497-3.932 1.74-7.863 3.478-11.304l28.567 47.427 18.879 31.7Zm-21.86-96.083c.745 0 1.242 0 1.987-.245 10.185-.246 19.128 3.931 25.338 10.812 4.968 5.406 7.949 12.533 8.197 20.396v2.212c-.248 6.389-2.235 12.041-5.465 16.71l-30.057-49.885ZM51.713 804.842c1.242-.983 2.236-2.212 3.23-3.932h.248c0-.491.248-.737.497-.983.497-.491.745-.983.993-1.474l.249-.246a56.296 56.296 0 0 0 7.204-32.683c-1.74-23.099-14.16-36.614-18.134-40.055-.497-.491-.497-1.228 0-1.72l11.427-17.693c.248-.491.248-1.228 0-1.966-.249-.737-.994-.983-1.74-.983l-123.706-.491c-.745 0-1.49.737-1.49 1.474l-.249 32.929c0 .737.745 1.474 1.49 1.474l62.6.492c28.566.246 33.286 15.973 33.534 25.311 0 3.194-.248 13.269-8.694 20.396-.248.491-.497.983-.497 1.474 0 .737.248 1.229.745 1.474 6.707 4.424 28.816 17.693 29.064 17.939.994.492 2.484.246 3.23-.737ZM59.662 847.922l.249-33.911v-.246l-130.663.492H-71V848.414l130.414-.492h.248Zm61.109-15.235v-2.212c-.497-9.829-8.198-18.184-18.134-19.167-.994-.246-1.987-.246-2.981-.246-9.936.492-18.134 7.618-19.376 17.447V833.67l.249.491v.738s0 .245.248.245v.492c1.987 8.355 8.943 14.498 17.637 15.481h3.229c10.185-.491 18.382-8.601 19.128-18.43ZM15.446 987.788c28.318-7.863 48.936-33.174 48.936-63.399 0-36.369-30.057-65.858-66.822-65.858-37.012 0-66.821 29.489-66.821 65.858 0 14.989 4.968 28.751 13.662 39.809.497.737.497 1.474.249 2.211l-11.924 20.396c-.993 1.475 0 3.195 1.739 3.195H-2.44c6.21 0 12.172-.737 17.886-2.212Zm-23.102-32.437c-15.153-2.457-26.828-15.481-26.828-30.962 0-1.721 0-3.195.248-4.669 2.484-15.236 15.65-27.031 31.796-27.031 17.637 0 32.045 14.252 32.045 31.7 0 17.447-14.408 31.454-32.045 31.454-1.738 0-3.477-.246-5.216-.492Z"
      fill="#fff"
      fillOpacity={0.25}
    />
  </Svg>
)

interface IBackgroundContainer {
  readonly title?: string
  readonly children: ReactNode
  readonly errorComponent?: () => ReactElement
  readonly bottom?: () => ReactElement
}

export const BackgroundContainer = ({
  title = 'Sign-up',
  children,
  errorComponent: ErrorComponent = () => null,
  bottom: Bottom = () => null
}: IBackgroundContainer) => {
  const { top, bottom } = useSafeAreaInsets()
  const { height } = useWindowDimensions()
  return (
    <>
      <View style={{ width: '85%', alignSelf: 'center' }}>
        <ErrorComponent />
      </View>
      <ScrollView contentContainerStyle={{ height: height + top }} style={{ flex: 1 }}>
        <Layout style={{ position: 'absolute', top: 0, left: 0, width: '100%' }}>
          <Image source={logo} style={{ alignSelf: 'center' }} />
        </Layout>
        <View style={{ flex: 1, justifyContent: 'center' }}>
          <Layout style={{ width: '85%', alignSelf: 'center', minHeight: '70%', borderRadius: 12, overflow: 'hidden' }}>
            <View style={{ paddingHorizontal: 40, paddingVertical: 20 }}>
              <Text category={'h2'} style={{ marginHorizontal: -20 }}>
                {title}
              </Text>
              <View style={{ marginVertical: 20 }}>{children}</View>
              <Bottom />
            </View>
            <View style={[StyleSheet.absoluteFill, { flex: 1, zIndex: -2 }]}>
              <LinearGradient
                stops={[
                  {
                    offset: 0.3,
                    color: '#fff',
                    opacity: 0.7
                  },
                  {
                    offset: 1,
                    color: '#738fba',
                    opacity: 1
                  }
                ]}
                style={{ height: 650 }}
              />
            </View>
          </Layout>
          <View
            style={{ alignItems: 'center', position: 'absolute', bottom, left: 0, width: '100%', flexDirection: 'row', justifyContent: 'center' }}>
            <Text category={'h6'} style={{ fontWeight: '600', color: '#FFFFFF', opacity: 0.5, marginBottom: 10 }}>
              Powered by{' '}
            </Text>
            <Text
              category={'h6'}
              style={{ marginTop: -8, fontWeight: '900', color: '#FFFFFF', opacity: 0.5, borderBottomWidth: 1, borderBottomColor: '#FFFFFF' }}>
              Bookly
            </Text>
          </View>
        </View>
        <Layout style={[StyleSheet.absoluteFill, { zIndex: -20 }]}>
          <LogoLeft style={{ height: '100%', position: 'absolute', left: 0, top: 0, zIndex: -1 }} />
          <LinearGradient
            stops={[
              {
                offset: 0.3,
                color: '#00ABB9',
                opacity: 0
              },
              {
                offset: 1,
                color: '#00ABB9',
                opacity: 1
              }
            ]}
            style={{ zIndex: -2, height: '100%', width: '100%' }}
          />
          <Image source={background} resizeMode="cover" style={{ position: 'absolute', bottom: 0, left: 0, height: '60%', width: '100%' }} />
        </Layout>
      </ScrollView>
    </>
  )
}
